---
layout: single
title: "React 안에서 map()돌릴때 고유한 key값을 부여해야 하는 것  의 중요성"
---

# React 에서 map() 돌리다가 내가 돌아버릴 뻔 한 하루.

**POINT 🎉**

- react 는 가상돔과 실제 돔을 비교해 그 부분만 리랜더링 된다는 것을 기억하자.

**오늘 상황**

- 사용자들이 작성한 리뷰 리스트를 `map()` 을 이용해 뿌려주었다.
- 각 리스트 마다 좋아요를 누를수 있는 기능을 완료했다..!

**문제 발생 💥**

- 습관처럼 각 리스트의 key값은 index로 지정하였다.
- 두번째 리스트 에서 좋아요를 누른 후, 상단 필터를 이용해 좋아요 많은 순 으로 리랜더링 시켰을때 데이터도 제대로 들어오고 안의 내용도 받아온 데이터에 따라 변화 되었는데 누르지 않은 좋아요가 눌러져 있었다.
- 다시 다 좋아요를 누른 상태로 하나의 카드에 좋아요를 취소했을때, 다른 리스트를 받아오면 해당 순서의 좋아요가 꺼져있었다. 🌧 \_ 마음에 비가 내리는 순간 이었다.

---

**원인**

- key값을 index로 설정 한 것이 문제였다.
- 다른 리스트를 불러왔을때, key값이 동일 하기 때문에 따로 state를 관리한 like에 대한 true/false 값이 업데이트 되지 않았다.
- 리액트는 state가 변하였을때 실제 돔과 비교하여 달라진 부분만 업데이트 시켜주는 똑똑한 친구다.
- 하지만 필터를 이용해 다른 리스트를 불러왔음에도, 해당 컴포넌트 의 key값이 같기 때문에 리액트의 가상돔은 변화를 인지하지 못하였고, 그 안에서 관리 되던 like에 대한 state가 변하지 못한 것이다.

**해결 💡**

- key값을 {data.reviewID} 로 변경해 주었다.
- 이렇게 되면 같은 화면에 새로운 리스트가 들어올때 달라진 key값 을 보고 리액트는 달라졌다고 판단.
- 해당 컴포넌트 안에 있는 state도 같이 업데이트 시켜 주었다.

---
